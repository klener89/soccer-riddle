{% extends 'base.html' %}
{% import "games/card.jinja" as card %}

{% block title %}Soccer Quiz{% endblock %}
{% block content %}
<div class="bg_surface txt_on_background">
    <div class="container-fluid pb-3">
        <div class="row pb-2">
            <h1 class="col-12 text-center py-5">
                Who played with all of these stars?
            </h1>
            <h2 class="col-12 text-center">
                Find the missing Teammate
            </h2>
        </div>
        <div class="container">
            <div class="row d-none d-sm-flex justify-content-center">
                {% for player in demo_game.players %}
                <div class="col-6 col-sm-5 col-lg-3">
                    {{ card.card(player=player) }}
                </div>
                {% endfor %}
            </div>
            <div class="row d-sm-none justify-content-center">
                {% for player in demo_game.players %}
                <div class="col-3">
                    <img class="rounded w-100" src="{{player.img | replace('small','header')}}" alt="{{player.name}}"
                        draggable="false" />
                </div>
                {% endfor %}
            </div>
        </div>
        <div class="pt-3 pb-5">
            <div class="row justify-content-center">
                <a class="btn btn-primary btn-lg m-2" href="{{url_for('game.play', game_id=16)}}"> Start this quiz
                </a>
                <a class="btn btn-primary btn-lg m-2" href="{{url_for('game.play', game_id=0)}}"> Start a random
                    quiz
                </a>
            </div>
        </div>
    </div>
    <div class="container-fluid overlapLeft bg_background">
        <div class="py-3"></div>
        <div class="py-5">
            <h1 class="text-center" id="pickQuiz">Want to play more?</h1>
            <h3 class="text-center p-3"> See our other quizzes </h3>
            <div class="container table-responsive">
                <table class="table table-striped table-dark">
                    <thead>
                        <tr class="text-center">
                            <th data-class='d-none' style="width: 5%">#</th>
                            <th style="width: 10%">Difficulty</th>
                            <th scope="col">Players</th>
                            <th>Share</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for game in games_list.items %}
                        <tr>
                            <td><a href="{{ url_for('game.play', game_id=game.id) }}" class="link">{{game.id}}</a></td>
                            <td><a href="{{ url_for('game.play', game_id=game.id) }}"
                                    class="link-unstyled">{{render_level(game.level)|safe}}</a></td>
                            <td><a href="{{ url_for('game.play', game_id=game.id) }}"
                                    class="link-unstyled text-truncate">{{ game.players|join(', ', attribute='name')}}</a>
                            </td>
                            <td class="text-center">
                                <a class="btn btn-primary" href="{{url_for('game.share', game_id=game.id)}}">Share</a>
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
                <nav aria-label="game pagination navbar-dark bg-dark">
                    <ul class="pagination justify-content-center">
                        <li class="page-item {{ '' if games_list.has_prev else 'disabled' }} ">
                            <a class="page-link"
                                href="{{ url_for('game.index', page=games_list.prev_num) }}#pickQuiz">Previous</a>
                        </li>
                        <!-- all page numbers -->
                        {% for page_num in games_list.iter_pages() %}
                        {% if page_num %}
                        <li class="page-item">
                            <a class="page-link"
                                href="{{ url_for('game.index', page=page_num) if page_num != games_list.page else '' }}#pickQuiz">{{ page_num }}</a>
                        </li>
                        {% else %}
                        <li>
                            <span class="ellipsis"
                                style="white-space; nowrap; overflow: hidden; text-overflow: ellipsis">â€¦</span>
                        </li>
                        {% endif %}
                        {% endfor %}

                        <li class="page-item {{ '' if games_list.has_next else 'disabled' }} ">
                            <a class="page-link"
                                href="{{ url_for('game.index', page=games_list.next_num) }}#pickQuiz">Next</a>
                        </li>
                    </ul>
                </nav>
            </div>
        </div>
        <hr>
    </div>
    <div class="container-fluid overlapRight bg_surface">
        <div class="py-5"></div>
        <div class="text-center py-5">
            <h1> Search for a specific Game by #ID </h1>
            <div class="container py-2">
                <form class="form-group" name="search" action="" method="post">
                    {{ form.csrf_token() }}
                    <div class="row justify-content-md-center">
                        <div class="input-group col-12 col-sm-4">
                            <div class="input-group-prepend">
                                <span class="input-group-text" id="inputGroupPrepend"><i
                                        class="fas fa-search"></i></span>
                            </div>
                            {{form.search(class= "is-invalid form-control" if form.search.errors else "form-control")}}
                            {% for error in form.search.errors %}
                            <div class="invalid-feedback">
                                {{ error }}
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                    <div class="p-2">
                        {{form.submit(class="btn btn-primary")}}
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}